## 保存和退出

`:w` 保存所作修改
	`:w file` 将数据写入到一个新文件中
	`:w! file` 覆盖一个已有的文件
	`:w>>file` 将数据追加到指定文件中
`:wq` 或 `ZZ` 保存并退出

`:q` 退出当前文件

`:q！` 退出当前文件，放弃未保存的修改


## 移动光标

### 基础移动操作

`h` 左 `j` 下 `k` 上 `l` 右

`-` 移动到上一行的开头
`+` 或 <Return> 移动到下一行的开头（非空白符）


### 在当前行中移动

`0` 移动到当前行的开头
`$` 移动到当前行的末尾
`^` 移动到当前行的第一个非空白符


### 以单词为单位移动

`w` 移动到下一个单词的词首
`e` 移动到下一个单词的词尾
`b` 移动到上一个单词的词首


> 以上三条命令如改为大写字母，则忽略标点符号。

### 以句子为单位移动

`)` 移动到下一个句子
`(` 移动到上一个句子


### 以段落为单位移动

`}` 移动到下一个段落
`{` 移动到上一个段落


### 在本屏中移动

`H` 移动到屏幕的顶部
`M` 移动到屏幕的中间
`L` 移动到屏幕的最后


### 以屏幕为单位移动

`Ctrl+f` 向下移动一屏
`Ctrl+b` 向上移动一屏
`Ctrl+d` 向下移动半屏
`Ctrl+u` 向上移动半屏

### 使用行号

行号关闭情况下，可以通过`Ctrl+g`打开屏幕下方状态栏显示光标所在行号和列号。

`:set number` 打开行号显示选项

`gg`  跳转到第一行

`G`  跳转到最后一行

`nG` 跳转到第n行

### 执行重复次数：在命令前面键入数字以重复执行后面的命令

`5w` 向后移动5个单词

`3}`   向后移动3个段落

> 该方法也可以应用在删除等其他命令。

## 插入文本

以下命令都将vi改变到输入模式，按<Esc> 键返回到命令模式

`i` 在当前光标位置前插入数据

`a` 在当前光标位置后插入数据

`I` 在当前行开头处插入数据

`A` 在当前行末尾处插入数据

`o` 在当前行下面插入一行

`O` 在当前行上面插入一行

## 修改文本

`r` 精确替换1个字符（不进入输入模式）

`C` 以插入方式从当前光标处替换到这一行的末尾

`cc`  以插入方式替换当前的整行

`cmove` 以插入方式从当前光标处替换到move（移动光标的命令）所给出的位置处

​	`cw` 替换一个单词
​	`c)` 从当前位置开始替换到段落的末尾
​	`c}` 替换一个段落

## 搜索文本

`/regex`	向下搜索指定的正则表达式

`?regex`	向上搜索指定的正则表达式

`n`	重复上一条/或?命令，搜索方向相同

`N`	重复上一条/或?命令，搜索方向相反

## 替换文本

以replace替换pattern

`:s/pattern/replace`  在当前行上替换第一个
`:s/pattern/replace/g`  在当前行上替换所有
`:s/pattern/replace/c`  替换之前手工确认
`:.,$s/pattern/replace/g`  替换从当前行起至文件末尾的所有
`:1,.s/pattern/replace/g`  替换从第一行至当前行的所有
`:%s/pattern/replace/g`  替换所有行的

## 反转字母的大小写

`~` 反转光标当前字母的大小写，不会改变非字母字符

`100~` 从当前光标开始将本行后100个字符反转，命令不会跨越行尾

## 分隔与连接行

分行：将光标移动到待分隔单词后的空格处，然后键入: `r<Return>`

接行：`J`，将下一行接到本行

## 删除文本

`x`	删除当前光标处的字符

`X`	删除光标左边的字符

`D`	删除从当前光标到本行末尾的字符

`dd`	删除当前行

`dmove` 删除从当前光标到move所给位置的字符

​	`dG` 	删除当前行到文件末尾的所有行

​	`dgg` 	删除从当前行到文件开头的所有行

`diw` 删除光标所在的单词

`:nd` 删除第n行

`:n1,n2d` 删除从n1至n2的所有行

## 撤销或重复改变

`u` 撤销上一条命令对编辑缓冲区的修改

`U` 恢复光标当前行所作的所有修改

`.` 重复上一命令对编辑缓冲区的修改

## 移动文本

vi总是在无名缓冲区(unnamed buffer)中为上一次删除保存一份副本，在任何时候都可以用`p`(在其后)或`P`(在其前)命令将其中的内容复制到编辑缓冲区。

`xp` 调换两个字符

`ddp` 调换两行

## 复制文本

使用y、yy或Y命令将文本由编辑缓冲区复制到无名缓冲区中，成为接出(yank)。

`yw` 接出1个单词

`yb` 向上（往回）接出1个单词

`yy` 接出1行

`5yy` 接出5行

`y3)` 接出3个句子

`y4}` 接出4个段落

## 临时执行shell命令

可以在不退出vi的情况下执行shell命令，方便临时需要的操作

`:!date`  调用date命令，回车后返回vim
`:sh`  启动一个新的shell以输入多条命令，exit以返回vim

## 执行shell命令并插入当前文件

`:r !program`  在当前行后插入程序program的输出

## 将外部文件中的数据插入当前文件

`:r file`  在当前行后插入文件file的内容

## 使用程序处理数据

`n!!program`  从当前行开始，在n个行上执行程序program
`!move program`  从当前行至move行执行程序program

Sample:

```bash
5!!sort // 将后面5行排序
```

## 设置选项

`:set number` 或 `:set nu` 打开行号显示;`:set nonumber` 或 `:set nonu` 关闭行号显示

`:set list` 显示不可见符号标记，如将制表符显示为^I，将行尾显示为$ `:set nolis` 关闭此开关

`:set mouse=a` 启用鼠标

`:set ic` 在搜索过程中忽略大小写 `:set noic` 关闭此开关

`:set`  显示所有改变了默认值的选项
